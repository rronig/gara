<?php session_start(); require_once 'config.php'; if ($_SERVER["REQUEST_METHOD"] == "POST"&&isset($_SESSION['user_id'])){if (empty(trim($_POST['name'])) || empty(trim($_POST['email']))) {echo "Name and email cannot be empty.";exit;}if (!filter_var(trim($_POST['email']), FILTER_VALIDATE_EMAIL)) {echo "Invalid email format.";exit;}$stmt=$pdo->prepare("SELECT COUNT(*) FROM users WHERE email=? and user_id!=?");$stmt->execute([$_POST['email'], $_SESSION['user_id']]);$count=$stmt->fetchColumn();if($count>0){echo "Email already exists!";exit;}$stmt=$pdo->prepare("UPDATE users SET name = ?, email = ? WHERE user_id = ?");try{$stmt->execute([trim($_POST['name']), trim($_POST['email']), $_SESSION['user_id']]);echo "Successfully Updated!";}catch(PDOException $e){echo "Error!"; error_log($e->getMessage());}} ?>